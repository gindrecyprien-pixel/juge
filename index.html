<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tribunal du Carnaval de Venise</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap');

body {
    font-family: 'EB Garamond', serif;
    background: linear-gradient(to bottom, #f7f1e1, #e0d7c1);
    margin: 0;
    padding: 30px;
    display: flex;
    justify-content: center;
}

.container {
    background: #fff8f0;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    max-width: 600px;
    width: 100%;
    text-align: center;
}

h2, h3 {
    color: #4b3b2a;
}

input, select {
    width: 100%;
    padding: 10px;
    margin: 10px 0 20px 0;
    border-radius: 6px;
    border: 1px solid #aaa;
}

button {
    padding: 10px 18px;
    border: none;
    border-radius: 6px;
    background: #4b3b2a;
    color: #fff;
    cursor: pointer;
}

button:hover {
    background: #392b1f;
}

.affaire-ligne {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #efe4d7;
    padding: 8px 12px;
    border-radius: 6px;
    margin-bottom: 8px;
}

.description {
    text-align: left;
    white-space: pre-line;
}

hr {
    margin: 30px 0;
}
</style>
</head>

<body>

<!-- ACCUEIL -->
<div class="container" id="accueil">
    <h2>NumÃ©ro de l'affaire Ã  juger</h2>
    <input type="text" id="affaireInput">

    <h2>Matricule du juge</h2>
    <input type="password" id="matriculeInput">

    <button onclick="verifier()">Valider</button>

    <hr>

    <h3>Liste des affaires rÃ©solues :</h3>
    <div id="listeAffaires"></div>
</div>

<!-- DÃ‰LIBÃ‰RATION -->
<div class="container" id="deliberation" style="display:none;">
    <h2 id="titreAffaire"></h2>
    <div id="descriptionAffaire" class="description"></div>

    <p><strong>Veuillez rÃ©unir tous les juges pour dÃ©libÃ©ration</strong></p>

    <select id="famigliaSelect">
        <option value="">-- SÃ©lectionner une famille --</option>
        <option value="Gondolini">Famiglia VÃ©nitienne "Gondolini"</option>
        <option value="Leoncini">Famiglia VÃ©nitienne "Leoncini"</option>
        <option value="Mascheri">Famiglia VÃ©nitienne "Mascheri"</option>
    </select>

    <button onclick="confirmerJugement()">Confirmer le jugement</button>
    <br><br>
    <button onclick="retourAccueil()">Retour</button>
</div>

<!-- JUGEMENT -->
<div class="container" id="jugement" style="display:none;">
    <h2 id="jugementTitre"></h2>
    <p id="jugementFamille"></p>
    <p id="symbolesJugement" style="font-size: 0.3em; margin: 15px 0;"></p>
    <p><strong>Amende de 3MV Ã  payer Ã  l'un des juges.</strong></p>
    <p><em>L'affaire est dÃ©finitivement jugÃ©e et aucun appel ne sera possible.</em></p>
    <br>
    <button onclick="retourAccueil()">Retour Ã  l'accueil</button>
</div>

<!-- FAUSSE AMENDE -->
<div class="container" id="fausseAmende" style="display:none;">
    <h2>Quelle amende souhaitez-vous ?</h2>
    
    <select id="montantAmende">
        <option value="3">3 MV</option>
        <option value="4">4 MV</option>
        <option value="5">5 MV</option>
        <option value="6">6 MV</option>
        <option value="7">7 MV</option>
        <option value="8">8 MV</option>
        <option value="9">9 MV</option>
        <option value="10">10 MV</option>
        <option value="11">11 MV</option>
        <option value="12">12 MV</option>
    </select>

    <button onclick="validerFausseAmende()">Valider</button>
    <br><br>
    <button onclick="retourAccueil()">Retour</button>
</div>

<!-- RÃ‰SULTAT FAUSSE AMENDE -->
<div class="container" id="resultatFausseAmende" style="display:none;">
    <h2>Amende confirmÃ©e</h2>
    <p id="texteAmende"></p>
    <br>
    <button onclick="retourAccueil()">Retour Ã  l'accueil</button>
</div>

<script>
/* ================= DONNÃ‰ES ================= */

const matriculeCorrect = "cestmoiquidecide";
const matriculeFausseAmende = "fausseamende";

const affaires = {
    "Profanateur_MasquÃ©": `Lors de la nuit principale du Carnaval de Venise, un individu masquÃ© a Ã©tÃ© surpris en train de :
nourrir intentionnellement les pigeons de la place Saint-Marc avec des confettis parfumÃ©s au fromage,
tout en portant un masque officiel du Carnavalâ€¦ Ã  l'envers.

Pourquoi c'est grave :
âŒ Nourrir les pigeons est strictement interdit (amende Ã©levÃ©e)
âŒ Les confettis parfumÃ©s ont provoquÃ© une attaque massive de pigeons sur les dignitaires
âŒ Porter un masque officiel Ã  l'envers est considÃ©rÃ© comme une insulte aux traditions

ğŸ˜³ RÃ©sultat : huÃ©es publiques, honte sociale et amende sont Ã  prÃ©voir.
Le coupable appartient forcÃ©ment Ã  une des 3 familles.`,

    "Clocher_Enthousiaste": `Lors de la nuit du Carnaval de Venise, un individu masquÃ© est accusÃ© d'avoir :
actionnÃ© Ã  plusieurs reprises la clochette dÃ©corative d'un palais privÃ©,
hors des horaires autorisÃ©s,
dans le seul but de tester l'Ã©cho musical dans les ruelles.

Pourquoi c'est risible mais sanctionnable :
ğŸ”” La clochette n'a aucune fonction officielle
ğŸ”” Le son a dÃ©clenchÃ© des saluts, rÃ©vÃ©rences et attroupements inutiles
ğŸ”” Des habitants ont cru Ã  une cÃ©rÃ©monie inexistante

ğŸ˜³ GÃªne publique gÃ©nÃ©rale
ğŸ’° Amende pour tapage et perturbation carnavalesque
Le responsable appartient forcÃ©ment Ã  l'une des 3 familles.`,

    "Rubans_RattachÃ©s": `Lors de la grande nuit du Carnaval, un individu masquÃ© a accompli un acte aussi absurde qu'Ã©lÃ©gant :
Il a passÃ© plus d'une heure Ã  rattacher correctement les rubans dÃ©faits des masques des invitÃ©s,
permettant Ã  des dizaines de participants de continuer Ã  danser sans perdre leur masque toutes les deux minutes.

Pourquoi c'est fÃ©licitable :
ğŸ­ Personne ne lui a demandÃ©
â³ Il a ignorÃ© les dÃ©filÃ©s et la musique pour se concentrer sur des nÅ“uds
ğŸ‘ Pourtant, la soirÃ©e a Ã©tÃ© visiblement plus fluide

ğŸ… Le Conseil du Carnaval souhaite fÃ©liciter officiellement ce "Bienfaiteur des Rubans"
L'auteur appartient Ã  l'une des 3 familles.`,

    "Bougies_RÃ©veillÃ©es": `Pendant la nuit du Carnaval, un individu masquÃ© a accompli un geste aussi absurde qu'attentionnÃ© :
Il a rallumÃ© mÃ©thodiquement les bougies dÃ©coratives Ã©teintes par les courants d'air,
sur les balcons, rebords de fenÃªtres et tables extÃ©rieures,
afin que la ville reste uniformÃ©ment Ã©clairÃ©e jusqu'Ã  l'aube.

Pourquoi c'est fÃ©licitable :
ğŸ•¯ï¸ Le vent les Ã©teignait presque aussitÃ´t
ğŸ•¯ï¸ L'effort Ã©tait sans fin
ğŸ•¯ï¸ Personne n'avait demandÃ© une lumiÃ¨re "parfaitement continue"

ğŸ‘ Pourtant, l'ambiance est restÃ©e magique toute la nuit
ğŸ… Le Conseil du Carnaval souhaite fÃ©liciter le "Gardien des Flammes"
L'auteur appartient Ã  l'une des 3 familles.`
};

const affairesJugees = {};
let montantAmendeActuel = 3; // Montant par dÃ©faut

/* ================= LOGIQUE ================= */

function verifier() {
    const affaire = affaireInput.value.trim();
    const matricule = matriculeInput.value.trim();

    // VÃ©rifier si c'est le matricule pour fausse amende
    if (matricule === matriculeFausseAmende) {
        accueil.style.display = "none";
        fausseAmende.style.display = "block";
        return;
    }

    if (!affaires[affaire]) {
        alert("Affaire inexistante.");
        return;
    }

    if (matricule !== matriculeCorrect) {
        alert("Matricule incorrect.");
        return;
    }

    if (affairesJugees[affaire]) {
        afficherJugement(affaire);
        return;
    }

    titreAffaire.innerText = "Affaire : " + affaire;
    descriptionAffaire.innerText = affaires[affaire];
    famigliaSelect.value = "";

    accueil.style.display = "none";
    deliberation.style.display = "block";
}

function validerFausseAmende() {
    const montant = montantAmende.value;
    montantAmendeActuel = montant; // Mise Ã  jour du montant global
    texteAmende.innerHTML = `<strong>Une amende de ${montant} MV a Ã©tÃ© Ã©tablie.</strong><br><em>Tous les jugements suivants utiliseront ce montant.</em>`;
    
    fausseAmende.style.display = "none";
    resultatFausseAmende.style.display = "block";
}

function confirmerJugement() {
    const affaire = titreAffaire.innerText.replace("Affaire : ", "");
    const famille = famigliaSelect.value;

    if (!famille) {
        alert("Veuillez choisir une famille.");
        return;
    }

    affairesJugees[affaire] = famille;
    mettreAJourListe();
    afficherJugement(affaire);
}

function afficherJugement(affaire) {
    jugementTitre.innerText = "Affaire : " + affaire;
    
    // VÃ©rifier si c'est une affaire de bienfaiteur
    const affairesBienfaitrices = ["Rubans_RattachÃ©s", "Bougies_RÃ©veillÃ©es"];
    const estBienfaiteur = affairesBienfaitrices.includes(affaire);
    
    if (estBienfaiteur) {
        jugementFamille.innerText =
            "La famille " + affairesJugees[affaire] + " a Ã©tÃ© reconnue bienfaitrice.";
        document.querySelector("#jugement p strong").innerText = 
            `Les 2 autres familles doivent payer une amende de ${montantAmendeActuel}MV chacune Ã  l'un des juges pour tentative d'appropriation d'un bien fait.`;
    } else {
        jugementFamille.innerText =
            "La famille " + affairesJugees[affaire] + " a Ã©tÃ© reconnue coupable.";
        document.querySelector("#jugement p strong").innerText = 
            `Amende de ${montantAmendeActuel}MV Ã  payer Ã  l'un des juges.`;
    }
    
    // Afficher les symboles selon le montant de l'amende
    if (montantAmendeActuel == 3) {
        symbolesJugement.innerHTML = "âš–ï¸ğŸ“œ   ğŸ“œğŸ“œ   âš–ï¸   ğŸ“œâš–ï¸   ğŸ“œâš–ï¸âš–ï¸   âš–ï¸<br>ğŸ“œâš–ï¸ğŸ“œâš–ï¸   ğŸ“œğŸ“œğŸ“œ   ğŸ“œâš–ï¸   âš–ï¸âš–ï¸ğŸ“œâš–ï¸ ğŸ“œğŸ“œğŸ“œ   âš–ï¸ğŸ“œâš–ï¸   ğŸ“œğŸ“œ   âš–ï¸ âš–ï¸ğŸ“œ";
    } else {
        symbolesJugement.innerHTML = "âš–ï¸ğŸ“œ   ğŸ“œğŸ“œ   âš–ï¸   ğŸ“œâš–ï¸   ğŸ“œâš–ï¸âš–ï¸   âš–ï¸<br>ğŸ“œâš–ï¸ğŸ“œâš–ï¸   âš–ï¸âš–ï¸ğŸ“œ   âš–ï¸ğŸ“œğŸ“œâš–ï¸   âš–ï¸âš–ï¸   ğŸ“œâš–ï¸âš–ï¸   âš–ï¸";
    }

    accueil.style.display = "none";
    deliberation.style.display = "none";
    jugement.style.display = "block";
}

function retourAccueil() {
    affaireInput.value = "";
    matriculeInput.value = "";

    jugement.style.display = "none";
    deliberation.style.display = "none";
    fausseAmende.style.display = "none";
    resultatFausseAmende.style.display = "none";
    accueil.style.display = "block";
}

function mettreAJourListe() {
    listeAffaires.innerHTML = "";

    for (let affaire in affairesJugees) {
        const ligne = document.createElement("div");
        ligne.className = "affaire-ligne";
        ligne.innerHTML = `
            <span>${affaire}</span>
            <button onclick="afficherJugement('${affaire}')">Jugement</button>
        `;
        listeAffaires.appendChild(ligne);
    }
}
</script>

</body>
</html>
