<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tribunal - Registre des affaires</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap');

body {
    font-family: 'EB Garamond', serif;
    background: linear-gradient(to bottom, #f7f1e1, #e0d7c1);
    margin: 0;
    padding: 30px;
    display: flex;
    justify-content: center;
}

.container {
    background: #fff8f0;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    max-width: 520px;
    width: 100%;
    text-align: center;
}

h2, h3 {
    color: #4b3b2a;
}

input, select {
    width: 100%;
    padding: 10px;
    margin: 10px 0 20px 0;
    border-radius: 6px;
    border: 1px solid #aaa;
}

button {
    padding: 10px 18px;
    border: none;
    border-radius: 6px;
    background: #4b3b2a;
    color: #fff;
    cursor: pointer;
}

button:hover {
    background: #392b1f;
}

.affaire-ligne {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #efe4d7;
    padding: 8px 12px;
    border-radius: 6px;
    margin-bottom: 8px;
}

hr {
    margin: 30px 0;
}
</style>
</head>

<body>

<!-- PAGE ACCUEIL -->
<div class="container" id="accueil">

    <h2>Numéro de l'affaire à juger</h2>
    <input type="text" id="affaireInput">

    <h2>Matricule du juge</h2>
    <input type="password" id="matriculeInput">

    <button onclick="verifier()">Valider</button>

    <hr>

    <h3>Liste des affaires résolues :</h3>
    <div id="listeAffaires"></div>
</div>

<!-- PAGE DELIBERATION -->
<div class="container" id="deliberation" style="display:none;">
    <h2 id="titreAffaire"></h2>
    <p id="descriptionAffaire"></p>

    <p><strong>Veuillez réunir tous les juges pour délibération</strong></p>

    <select id="famigliaSelect">
        <option value="">-- Sélectionner une famille --</option>
        <option value="Gondolini">Famiglia Vénitienne "Gondolini"</option>
        <option value="Leoncini">Famiglia Vénitienne "Leoncini"</option>
        <option value="Mascheri">Famiglia Vénitienne "Mascheri"</option>
    </select>

    <button onclick="confirmerJugement()">Confirmer le jugement</button>
    <br><br>
    <button onclick="retourAccueil()">Retour</button>
</div>

<!-- PAGE JUGEMENT -->
<div class="container" id="jugement" style="display:none;">
    <h2 id="jugementTitre"></h2>
    <p id="jugementDescription"></p>
    <p id="jugementFamille"></p>
    <p><strong>Amende de 3MV à payer à l'un des juges.</strong></p>
    <p><em>L'affaire est définitivement jugée et aucun appel ne sera possible.</em></p>
    <br>
    <button onclick="retourAccueil()">Retour à l'accueil</button>
</div>

<script>
/* ================= DONNÉES ================= */

const matriculeCorrect = "cestmoiquidecide";

const affaires = {
    "123A": "Affaire sur un différend commercial entre deux marchands.",
    "456B": "Affaire de fraude lors d’un contrat de transport.",
    "789C": "Affaire de vol de biens précieux dans la cité."
};

// Stockage des affaires jugées
const affairesJugees = {};

/* ================= LOGIQUE ================= */

function verifier() {
    const affaire = affaireInput.value.trim();
    const matricule = matriculeInput.value.trim();

    if (!affaires[affaire]) {
        alert("Affaire inexistante.");
        return;
    }

    if (matricule !== matriculeCorrect) {
        alert("Matricule incorrect.");
        return;
    }

    if (affairesJugees[affaire]) {
        afficherJugement(affaire);
        return;
    }

    titreAffaire.innerText = "Affaire : " + affaire;
    descriptionAffaire.innerText = affaires[affaire];
    famigliaSelect.value = "";

    accueil.style.display = "none";
    deliberation.style.display = "block";
}

function confirmerJugement() {
    const affaire = titreAffaire.innerText.replace("Affaire : ", "");
    const famille = famigliaSelect.value;

    if (!famille) {
        alert("Veuillez choisir une famille.");
        return;
    }

    affairesJugees[affaire] = famille;
    mettreAJourListe();
    afficherJugement(affaire);
}

function afficherJugement(affaire) {
    jugementTitre.innerText = "Affaire : " + affaire;
    jugementDescription.innerText = affaires[affaire];
    jugementFamille.innerText = "La famille " + affairesJugees[affaire] + " a été reconnue coupable.";

    accueil.style.display = "none";
    deliberation.style.display = "none";
    jugement.style.display = "block";
}

function retourAccueil() {
    affaireInput.value = "";
    matriculeInput.value = "";

    jugement.style.display = "none";
    deliberation.style.display = "none";
    accueil.style.display = "block";
}

function mettreAJourListe() {
    listeAffaires.innerHTML = "";

    for (let affaire in affairesJugees) {
        const ligne = document.createElement("div");
        ligne.className = "affaire-ligne";
        ligne.innerHTML = `
            <span>${affaire}</span>
            <button onclick="afficherJugement('${affaire}')">Jugement</button>
        `;
        listeAffaires.appendChild(ligne);
    }
}
</script>

</body>
</html>
